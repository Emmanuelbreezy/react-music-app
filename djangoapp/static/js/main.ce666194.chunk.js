(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{178:function(e,t,a){e.exports=a(231)},231:function(e,t,a){"use strict";a.r(t);var n=a(17),r=a(0),c=a.n(r),l=a(13),i=a.n(l);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(18),s=a(294),u=a(16),m=a(54),d=a(58),p=a(170),g=a(267),f=a(71),E=a.n(f),b=a(98),v=a.n(b),h=a(295),k=Object(p.a)({palette:{primary:{light:E.a[500],main:E.a[700],dark:E.a[900]},secondary:{light:v.a[300],main:v.a[500],dark:v.a[700]}},typography:{useNextVariants:!0}});var y=function(e){return function(t){return c.a.createElement(g.a,{theme:k},c.a.createElement(h.a,null),c.a.createElement(e,t))}},w=a(12),O=a(14),j=a.n(O),x=a(27),N=a.n(x),S=a(290),I=a(88),C=a.n(I),T=a(171),$=a(236),L=a(150),W=a.n(L);function R(){var e=Object(n.a)(["\n\tquery($search: String){\n\t\ttracks(search: $search){\n\t\t\tid\n\t\t\ttitle\n\t\t\tdescription\n\t\t\turl\n\t\t\tlikes {\n\t\t\t\tid\n\t\t\t}\n\t\t\tpostedBy {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\t}\n\t\t}\n\t}\n\n"]);return R=function(){return e},e}var q=Object(u.b)(R()),F=j()((function(e){return{root:{padding:"2px 4px",margin:e.spacing(1),display:"flex",alignItems:"center"}}}))((function(e){var t=e.classes,a=e.setSearchResults,n=Object(r.useState)(""),l=Object(w.a)(n,2),i=l[0],s=l[1],u=Object(r.useRef)(),m=function(){a([]),s([]),u.current.focus()};return c.a.createElement(o.a,null,(function(e){return c.a.createElement("form",{onSubmit:function(t){return function(e,t){var n;return N.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),r.prev=1,r.next=4,N.a.awrap(t.query({query:q,variables:{search:i}}));case 4:n=r.sent,a(n.data.tracks),console.log({res:n}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),console.log("[ERROR SEARCH");case 12:case"end":return r.stop()}}),null,null,[[1,9]])}(t,e)}},c.a.createElement(T.a,{className:t.root,elevation:1},c.a.createElement($.a,{onClick:m},c.a.createElement(C.a,null)),c.a.createElement(S.a,{fullWidth:!0,placeholder:"Search All Tracks",onChange:function(e){return s(e.target.value)},value:i,inputRef:u}),c.a.createElement($.a,{type:"submit"},c.a.createElement(W.a,null))))}))})),B=a(271),A=a(280),D=a(281),z=a(44),U=a(291),_=a(282),P=a(279),Q=a(283),J=a(159),G=a.n(J),M=a(155),H=a.n(M),V=function(e){var t=e.url;return c.a.createElement("div",null,c.a.createElement(H.a,{url:t,height:"30px",width:"500px",controls:!0}))},K=a(156),X=a.n(K);function Y(){var e=Object(n.a)(["\n\tmutation($trackId:Int!){\n\t\tcreateLike(trackId:$trackId){\n\t\t\ttrack{\n\t\t\t\tid\n\t\t\t\tlikes {\n\t\t\t\t\tid\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n"]);return Y=function(){return e},e}var Z=Object(u.b)(Y()),ee=j()((function(e){return{iconButton:{color:"deeppink"},icon:{marginLeft:e.spacing(2)/2}}}))((function(e){var t=e.classes,a=e.trackId,n=e.likeCount,l=Object(r.useContext)(ct);return c.a.createElement(s.a,{mutation:Z,variables:{trackId:a},onCompleted:function(e){console.log({data:e})},refetchQueries:function(){return[{query:lt}]}},(function(e){return c.a.createElement($.a,{className:t.iconButton,onClick:function(t){t.stopPropagation(),e()},disabled:l.likeSet.findIndex((function(e){return e.track.id===a}))>-1},n,c.a.createElement(X.a,{className:t.icon}))}))})),te=a(112),ae=a(157),ne=a.n(ae);function re(){var e=Object(n.a)(["\n\tmutation($trackId: Int!){\n\t\tdeleteTrack(trackId: $trackId){\n\t\t\ttrackId\n\t\t}\n\t}\n"]);return re=function(){return e},e}console.log(Re);var ce=Object(u.b)(re()),le=function(e){var t=e.track;return Object(r.useContext)(ct).id===t.postedBy.id&&c.a.createElement(s.a,{mutation:ce,variables:{trackId:t.id},onCompleted:function(e){console.log(e)},update:function(e,t){var a=t.data.deleteTrack,n=e.readQuery({query:Re}),r=n.tracks.findIndex((function(e){return Number(e.id)===a.trackId})),c=[].concat(Object(te.a)(n.tracks.slice(0,r)),Object(te.a)(n.tracks.slice(r+1)));e.writeQuery({query:Re,data:{tracks:c}})}},(function(e){return c.a.createElement($.a,{onClick:e},c.a.createElement(ne.a,null))}))},ie=a(95),oe=a.n(ie),se=a(158),ue=a.n(se),me=a(276),de=a(293),pe=a(277),ge=a(274),fe=a(275),Ee=a(270),be=a(272),ve=a(273),he=a(278),ke=a(96),ye=a.n(ke),we=j()((function(e){return{snackbar:{margin:e.spacing(2)}}}))((function(e){e.classes;return c.a.createElement("div",null,"Error")}));function Oe(){var e=Object(n.a)(["\n  mutation($trackId: Int!, $title: String, $description: String, $url: String){\n    updateTrack(trackId:$trackId, title:$title, description:$description, url:$url){\n      track {\n          id\n          title\n          description\n          url\n          likes{\n            id\n          }\n          postedBy{\n            id \n            username\n            }\n  }\n    }\n  }\n\n"]);return Oe=function(){return e},e}var je=Object(u.b)(Oe()),xe=j()((function(e){return{container:{display:"flex",flexWrap:"wrap"},dialog:{margin:"0 auto",maxWidth:550},textField:{margin:e.spacing(1)},cancel:{color:"red"},save:{color:"green"},button:{margin:e.spacing(1)},icon:{marginLeft:e.spacing(1)},input:{display:"none"}}}))((function(e){var t=e.classes,a=e.track,n=Object(r.useContext)(ct),l=Object(r.useState)(!1),i=Object(w.a)(l,2),o=i[0],u=i[1],m=Object(r.useState)(a.title),d=Object(w.a)(m,2),p=d[0],g=d[1],f=Object(r.useState)(""),E=Object(w.a)(f,2),b=E[0],v=E[1],h=Object(r.useState)(a.description),k=Object(w.a)(h,2),y=k[0],O=k[1],j=Object(r.useState)(!1),x=Object(w.a)(j,2),I=x[0],C=x[1],T=Object(r.useState)(""),L=Object(w.a)(T,2),W=L[0],R=L[1],q=n.id===a.postedBy.id,F=function(e){var t=e.target.files[0];t&&t.size>1e7?R("$(selectedFile.name): File size too large"):(v(t),R(""))},B=function(){var e,t;return N.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return(e=new FormData).append("file",b),e.append("resource_type","raw"),e.append("upload_preset","react-tracks"),e.append("cloud_name","emmabreezy25"),a.next=7,N.a.awrap(oe.a.post("https://api.cloudinary.com/v1_1/emmabreezy25/raw/upload",e));case 7:return t=a.sent,a.abrupt("return",t.data.url);case 9:case"end":return a.stop()}}))};return q&&c.a.createElement(c.a.Fragment,null,c.a.createElement($.a,{onClick:function(){return u(!0)}},c.a.createElement(ue.a,null)),c.a.createElement(s.a,{mutation:je,onCompleted:function(e){C(!1),u(!1)},refetchQueries:function(){return[{query:Re}]}},(function(e,n){n.loading;var r=n.error;return r?c.a.createElement(we,{error:r}):c.a.createElement(de.a,{open:o,className:t.dialog},c.a.createElement("form",{onSubmit:function(t){return function(e,t){var n;return N.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),C(!0),r.prev=2,r.next=5,N.a.awrap(B());case 5:n=r.sent,console.log(n),t({variables:{trackId:a.id,title:p,description:y,url:n}}),r.next=16;break;case 10:r.prev=10,r.t0=r.catch(2),console.error("Error uploading file",r.t0),C(!1),u(!1),alert("Error occured");case 16:case"end":return r.stop()}}),null,null,[[2,10]])}(t,e)}},c.a.createElement(ve.a,null," Update Track "),c.a.createElement(ge.a,null,c.a.createElement(fe.a,null,"Add a Title, Description & Audio File (Under 10MB)"),c.a.createElement(Ee.a,{fullWidth:!0},c.a.createElement(S.a,{label:"Title",placeholder:"Add Title",className:t.textField,onChange:function(e){return g(e.target.value)},value:p})),c.a.createElement(Ee.a,{fullWidth:!0},c.a.createElement(S.a,{multiline:!0,rows:"4",label:"Description",placeholder:"Add Description",className:t.textField,onChange:function(e){return O(e.target.value)},value:y})),c.a.createElement(Ee.a,{fullWidth:!0,error:Boolean(W)},c.a.createElement("input",{id:"audio",required:!0,type:"file",accept:"audio/*",className:t.input,onChange:F}),c.a.createElement("label",{htmlFor:"audio"},c.a.createElement(me.a,{variant:"outlined",color:b?"secondary":"inherit",component:"span",className:t.button},"Audio File",c.a.createElement(ye.a,{className:t.icon})),b&&b.name,c.a.createElement(be.a,null,W)))),c.a.createElement(pe.a,null,c.a.createElement(me.a,{className:t.cancel,onClick:function(){return u(!1)},disabled:I},"Cancel"),c.a.createElement(me.a,{className:t.save,type:"submit",disabled:I||!p.trim()||!y.trim()||!b},I?c.a.createElement(he.a,{className:t.save,size:24}):"Update Track"))))})))})),Ne=j()({root:{display:"flex",flexWrap:"wrap"},details:{alignItems:"center"},link:{color:"#424242",textDecoration:"none","&:hover":{color:"black"}}})((function(e){var t=e.classes,a=e.tracks;return c.a.createElement(B.a,null,a.map((function(e){return c.a.createElement(U.a,{key:e.id},c.a.createElement(P.a,{expandIcon:c.a.createElement(G.a,null)},c.a.createElement(A.a,{className:t.root},c.a.createElement(ee,{trackId:e.id,likeCount:e.likes.length}),c.a.createElement(D.a,{primaryTypographyProps:{color:"primary"},primary:e.title,secondary:c.a.createElement(d.b,{className:t.link,to:"/profile/".concat(e.postedBy.id)},e.postedBy.username)}),c.a.createElement(V,{url:e.url}))),c.a.createElement(_.a,{className:t.details},c.a.createElement(z.a,{variant:"body1"},e.description," ")),c.a.createElement(Q.a,null,c.a.createElement(xe,{track:e}),c.a.createElement(le,{track:e})))})))})),Se=a(161),Ie=a.n(Se);function Ce(){var e=Object(n.a)(["\n  mutation($title:String!,$description:String!, $url:String!){\n     createTrack(title:$title, description:$description, url:$url)\n     {\n       track {\n        id\n        title\n        description\n        url \n        likes {\n          id\n        }\n        postedBy {\n          id\n          username\n        }\n       }\n     }\n  }\n"]);return Ce=function(){return e},e}var Te=Object(u.b)(Ce()),$e=j()((function(e){return{container:{display:"flex",flexWrap:"wrap"},dialog:{margin:"0 auto",maxWidth:550},textField:{margin:e.spacing(2)},cancel:{color:"red"},save:{color:"green"},button:{margin:e.spacing(2)},icon:{marginLeft:e.spacing(2)},input:{display:"none"},fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2),zIndex:"200"}}}))((function(e){var t=e.classes,a=Object(r.useState)(!1),n=Object(w.a)(a,2),l=n[0],i=n[1],o=Object(r.useState)(""),u=Object(w.a)(o,2),m=u[0],d=u[1],p=Object(r.useState)(""),g=Object(w.a)(p,2),f=g[0],E=g[1],b=Object(r.useState)(""),v=Object(w.a)(b,2),h=v[0],k=v[1],y=Object(r.useState)(!1),O=Object(w.a)(y,2),j=O[0],x=O[1],I=Object(r.useState)(""),T=Object(w.a)(I,2),$=T[0],L=T[1],W=function(e){var t=e.target.files[0];t&&t.size>1e7?L("$(selectedFile.name): File size too large"):(k(t),L(""))},R=function(){var e,t;return N.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return(e=new FormData).append("file",h),e.append("resource_type","raw"),e.append("upload_preset","react-tracks"),e.append("cloud_name","emmabreezy25"),a.next=7,N.a.awrap(oe.a.post("https://api.cloudinary.com/v1_1/emmabreezy25/raw/upload",e));case 7:return t=a.sent,a.abrupt("return",t.data.url);case 9:case"end":return a.stop()}}))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(me.a,{className:t.fab,color:"secondary",onClick:function(){return i(!0)}},l?c.a.createElement(C.a,null):c.a.createElement(Ie.a,null)),c.a.createElement(s.a,{mutation:Te,onCompleted:function(e){x(!1),i(!1),d(""),E(""),k("")},update:function(e,t){var a=t.data.createTrack,n=e.readQuery({query:Re}).tracks.concat(a.track);e.writeQuery({query:Re,data:{tracks:n}})}},(function(e,a){a.loading;var n=a.error;return n?c.a.createElement(we,{error:n}):c.a.createElement(de.a,{open:l,className:t.dialog},c.a.createElement("form",{onSubmit:function(t){return function(e,t){var a;return N.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),x(!0),n.prev=2,n.next=5,N.a.awrap(R());case 5:a=n.sent,console.log(a),t({variables:{title:m,description:f,url:a}}),n.next=19;break;case 10:n.prev=10,n.t0=n.catch(2),console.error("Error uploading file",n.t0),d(""),E(""),k(""),x(!1),i(!1),alert("Error occured");case 19:case"end":return n.stop()}}),null,null,[[2,10]])}(t,e)}},c.a.createElement(ve.a,null," Create Track "),c.a.createElement(ge.a,null,c.a.createElement(fe.a,null,"Add a Title, Description & Audio File (Under 10MB)"),c.a.createElement(Ee.a,{fullWidth:!0},c.a.createElement(S.a,{label:"Title",placeholder:"Add Title",className:t.textField,onChange:function(e){return d(e.target.value)},value:m})),c.a.createElement(Ee.a,{fullWidth:!0},c.a.createElement(S.a,{multiline:!0,rows:"4",label:"Description",placeholder:"Add Description",className:t.textField,onChange:function(e){return E(e.target.value)},value:f})),c.a.createElement(Ee.a,{fullWidth:!0,error:Boolean($)},c.a.createElement("input",{id:"audio",required:!0,type:"file",accept:"audio/*",className:t.input,onChange:W}),c.a.createElement("label",{htmlFor:"audio"},c.a.createElement(me.a,{variant:"outlined",color:h?"secondary":"inherit",component:"span",className:t.button},"Audio File",c.a.createElement(ye.a,{className:t.icon})),h&&h.name,c.a.createElement(be.a,null,$)))),c.a.createElement(pe.a,null,c.a.createElement(me.a,{className:t.cancel,onClick:function(){return i(!1)},disabled:j},"Cancel"),c.a.createElement(me.a,{className:t.save,type:"submit",disabled:j||!m.trim()||!f.trim()||!h},j?c.a.createElement(he.a,{className:t.save,size:24}):"Add Track"))))})))})),Le=j()((function(e){return{root:{width:"100vw",textAlign:"center"},progress:{margin:e.spacing(2),color:e.palette.secondary.dark}}}))((function(e){var t=e.classes;return c.a.createElement("div",{className:t.root},c.a.createElement(he.a,{className:t.progress}))}));function We(){var e=Object(n.a)(["\n\nquery getTracksQuery{\n\ttracks {\n\t\tid\n\t\ttitle\n\t\tdescription\n\t\turl\n\t\tlikes{\n\t\t\tid\n\t\t}\n\t\tpostedBy{\n\t\t\tid \n\t\t\tusername\n\t\t}\n\t}\n}\n\n\n"]);return We=function(){return e},e}var Re=Object(u.b)(We()),qe=j()((function(e){return{container:{margin:"0 auto",maxWidth:960,padding:e.spacing(2)}}}))((function(e){var t=e.classes,a=Object(r.useState)([]),n=Object(w.a)(a,2),l=n[0],i=n[1];return c.a.createElement("div",{className:t.container},c.a.createElement(F,{setSearchResults:i}),c.a.createElement($e,null),c.a.createElement(s.b,{query:Re},(function(e){var t=e.data,a=e.loading,n=e.error;if(a)return c.a.createElement(Le,null);if(n)return c.a.createElement(we,null);var r=l.length>0?l:t.tracks;return c.a.createElement(Ne,{tracks:r})})))})),Fe=a(66),Be=a(284),Ae=a(285),De=a(297),ze=a(163),Ue=a.n(ze),_e=a(162),Pe=a.n(_e),Qe=a(286);function Je(){var e=Object(n.a)(["\n  query ($id: Int!){\n   user(id: $id){\n    id\n    username\n    dateJoined\n    likeSet{\n      id\n      track{\n        id\n        title\n        url\n        likes{\n          id\n        }\n        postedBy{\n          id\n          username\n        }\n        \n      }\n    }\n    tracksSet{\n      id\n      title\n      url\n      likes{\n        id\n      }\n    }\n  }\n}\n"]);return Je=function(){return e},e}var Ge=Object(u.b)(Je()),Me=j()((function(e){return{paper:Object(Fe.a)({width:"auto",display:"block",padding:e.spacing(2),marginLeft:e.spacing(3),marginRight:e.spacing(3),marginTop:e.spacing(2),marginBottom:e.spacing(2)},e.breakpoints.up("md"),{width:650,marginLeft:"auto",marginRight:"auto"}),card:{display:"flex",justifyContent:"center"},title:{display:"flex",alignItems:"center",marginBottom:e.spacing(2)},audioIcon:{color:"purple",fontSize:30,marginRight:e.spacing(1)},thumbIcon:{color:"green",marginRight:e.spacing(1)},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}}))((function(e){var t=e.classes,a=e.match.params.id;return c.a.createElement(s.b,{query:Ge,variables:{id:a}},(function(e){var a=e.data,n=e.loading,r=e.error;return n?c.a.createElement(Le,null):r?c.a.createElement(we,{error:r}):c.a.createElement("div",null,c.a.createElement(Be.a,{className:t.card},c.a.createElement(Ae.a,{avatar:c.a.createElement(De.a,null," ",a.user.username[0]),title:a.user.username,subheader:"Joined ".concat(a.user.dateJoined)})),c.a.createElement(T.a,{elevation:1,className:t.paper},c.a.createElement(z.a,{className:t.title},c.a.createElement(Pe.a,{className:t.audioIcon}),"created Tracks"),a.user.tracksSet.map((function(e){return c.a.createElement("div",{key:e.id},c.a.createElement(z.a,null,e.title," - ",e.likes.length," Likes"),c.a.createElement(V,{url:e.url}),c.a.createElement(Qe.a,{className:t.divider}))}))),c.a.createElement(T.a,{elevation:1,className:t.paper},c.a.createElement(z.a,{className:t.title},c.a.createElement(Ue.a,{className:t.thumbIcon}),"Liked Tracks"),a.user.likeSet.map((function(e){var a=e.track;return c.a.createElement("div",{key:a.id},c.a.createElement(z.a,null,a.title," . ",a.likes.length," Likes . ",a.postedBy.username),c.a.createElement(V,{url:a.url}),c.a.createElement(Qe.a,{className:t.divider}))}))))}))})),He=a(287),Ve=a(288),Ke=a(165),Xe=a.n(Ke),Ye=a(166),Ze=a.n(Ye),et=a(164),tt=a.n(et),at=j()({root:{cursor:"pointer",display:"flex"},buttonIcon:{marginLeft:"5px"}})((function(e){var t=e.classes;return c.a.createElement(o.a,null,(function(e){return c.a.createElement(me.a,{onClick:function(){return function(e){localStorage.removeItem("authToken"),e.writeData({data:{isLoggedIn:!1}}),console.log("Signout out user",e)}(e)}},c.a.createElement(z.a,{color:"secondary"},"Signout"),c.a.createElement(tt.a,{className:t.buttonIcon,color:"secondary"}))}))})),nt=j()((function(e){return{root:{flexGrow:1,margin:0,padding:0},grow:{flexGrow:1,display:"flex",alignItems:"center",textDecoration:"none"},logo:{marginRight:e.spacing(1),fontSize:45},faceIcon:{marginRight:e.spacing(1),fontSize:30,color:"white"},username:{color:"white",fontSize:30}}}))((function(e){var t=e.classes,a=e.currentUser;return c.a.createElement(He.a,{position:"static",className:t.root},c.a.createElement(Ve.a,null,c.a.createElement("a",{href:"/",className:t.grow},c.a.createElement(z.a,{color:"secondary",noWrap:!0},"Home")),c.a.createElement(d.b,{exact:"true",to:"/",className:t.grow},c.a.createElement(Xe.a,{className:t.logo,color:"secondary"}),c.a.createElement(z.a,{color:"secondary",noWrap:!0},"Musix")),a&&c.a.createElement(d.b,{to:"/profile/".concat(a.id),className:t.grow},c.a.createElement(Ze.a,{className:t.faceIcon}),c.a.createElement(z.a,{className:t.username,noWrap:!0},a.username)),c.a.createElement(at,null)))}));function rt(){var e=Object(n.a)(["\n\n {\n \tme{\n \t\tid\n \t\tusername\n \t\tlikeSet{\n \t\t\ttrack{\n \t\t\t\tid\n \t\t\t}\n \t\t}\n \t}\n }\n\n\n\n"]);return rt=function(){return e},e}var ct=c.a.createContext(),lt=Object(u.b)(rt()),it=y((function(){return c.a.createElement(s.b,{query:lt,fetchPolicy:"cache-and-network"},(function(e){var t=e.data,a=e.loading,n=e.error;if(a)return c.a.createElement(Le,null);if(n)return c.a.createElement(we,null);var l=t.me,i=c.a.createElement(ct.Provider,{value:l},c.a.createElement(nt,{currentUser:l}),c.a.createElement(m.c,null,c.a.createElement(m.a,{path:"/",exact:!0,component:qe}),c.a.createElement(m.a,{path:"/profile/:id",exact:!0,component:Me})));return c.a.createElement(d.a,{basename:"/app"},c.a.createElement(r.Suspense,{fallback:c.a.createElement("div",null,"Loading")},i))}))})),ot=a(269),st=a(296),ut=a(167),mt=a.n(ut);function dt(){var e=Object(n.a)(["\n  mutation($username:String!,$password:String!)\n  {\n    tokenAuth(username:$username,password:$password)\n    {\n      token\n    }\n  }\n"]);return dt=function(){return e},e}var pt=Object(u.b)(dt()),gt=j()((function(e){return{root:Object(Fe.a)({width:"auto",display:"block",marginLeft:e.spacing(3),marginRight:e.spacing(3)},e.breakpoints.up("md"),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},title:{marginTop:e.spacing(2),color:e.palette.secondary.main},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}}))((function(e){var t=e.classes,a=e.setNewUser,n=Object(r.useState)(""),l=Object(w.a)(n,2),i=l[0],o=l[1],u=Object(r.useState)(""),m=Object(w.a)(u,2),d=m[0],p=m[1];return c.a.createElement("div",{className:t.root},c.a.createElement(T.a,{className:t.paper},c.a.createElement(De.a,{className:t.avatar},c.a.createElement(mt.a,null)),c.a.createElement(z.a,null,"Login as Existing User"),c.a.createElement(s.a,{mutation:pt,variables:{username:i,password:d}},(function(e,n){var r=n.loading,l=n.error,s=(n.called,n.client);return c.a.createElement("form",{onSubmit:function(t){return function(e,t,a){var n;return N.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),r.prev=1,r.next=4,N.a.awrap(t());case 4:n=r.sent,localStorage.setItem("authToken",n.data.tokenAuth.token),a.writeData({data:{isLoggedIn:!0}}),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(1),console.log("[ERROR LOGIN]"),alert("[USER DETAIL IS INVALID]");case 13:case"end":return r.stop()}}),null,null,[[1,9]])}(t,e,s)},className:t.form},c.a.createElement(Ee.a,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(st.a,{htmlFor:"username"},"Username"),c.a.createElement(ot.a,{id:"username",type:"text",onChange:function(e){return o(e.target.value)}})),c.a.createElement(Ee.a,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(st.a,{htmlFor:"password"},"Password"),c.a.createElement(ot.a,{id:"password",type:"password",onChange:function(e){return p(e.target.value)}})),c.a.createElement("br",null),c.a.createElement(me.a,{type:"submit",variant:"contained",color:"primary",className:t.submit,fullWidth:!0,disabled:r||!i.trim()||!d.trim()},r?"Logging...":"Login"),c.a.createElement(me.a,{onClick:function(){return a(!0)},color:"secondary",variant:"outlined",fullWidth:!0},"New user? Register here"),l&&c.a.createElement("div",null,"Error"))}))))})),ft=(a(289),a(168)),Et=a.n(ft),bt=a(169),vt=a.n(bt);function ht(){var e=Object(n.a)(["\n  mutation($username:String!,$email:String!,$password:String!)\n  {\n    createUser(username:$username, email:$email, password:$password)\n    {\n      user{\n        username\n        email\n      }\n    }\n  }\n\n\n"]);return ht=function(){return e},e}var kt=Object(u.b)(ht()),yt=j()((function(e){return{root:Object(Fe.a)({width:"auto",display:"block",marginLeft:e.spacing(3),marginRight:e.spacing(3)},e.breakpoints.up("md"),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},title:{marginTop:e.spacing(2),color:e.palette.openTitle},avatar:{margin:e.spacing(2),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(2)},submit:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},icon:{padding:"0px 2px 2px 0px",verticalAlign:"middle",color:"green"}}}))((function(e){var t=e.classes,a=e.setNewUser,n=Object(r.useState)(""),l=Object(w.a)(n,2),i=l[0],o=l[1],u=Object(r.useState)(""),m=Object(w.a)(u,2),d=m[0],p=m[1],g=Object(r.useState)(""),f=Object(w.a)(g,2),E=f[0],b=f[1],v=Object(r.useState)(!1),h=Object(w.a)(v,2),k=h[0],y=h[1];return c.a.createElement("div",{className:t.root},c.a.createElement(T.a,{className:t.paper},c.a.createElement(De.a,{className:t.avatar},c.a.createElement(Et.a,null)),c.a.createElement(z.a,null,"Register"),c.a.createElement(s.a,{mutation:kt,variables:{username:i,email:d,password:E},onCompleted:function(e){console.log({data:e}),y(!0)}},(function(e,n){var r=n.loading,l=n.error;return c.a.createElement("form",{onSubmit:function(t){return function(e,t){e.preventDefault(),t()}(t,e)},className:t.form},c.a.createElement(Ee.a,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(st.a,{htmlFor:"username"},"Username"),c.a.createElement(ot.a,{id:"username",type:"text",onChange:function(e){return o(e.target.value)}})),c.a.createElement(Ee.a,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(st.a,{htmlFor:"email"},"Email"),c.a.createElement(ot.a,{id:"email",type:"email",onChange:function(e){return p(e.target.value)}})),c.a.createElement(Ee.a,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(st.a,{htmlFor:"password"},"Password"),c.a.createElement(ot.a,{id:"password",type:"password",onChange:function(e){return b(e.target.value)}})),c.a.createElement("br",null),c.a.createElement(me.a,{type:"submit",variant:"contained",color:"secondary",className:t.submit,fullWidth:!0,disabled:r||!i.trim()||!d.trim()||!E.trim()},r?"Registering...":"Register"),c.a.createElement(me.a,{onClick:function(){return a(!1)},color:"primary",variant:"outlined",fullWidth:!0},"Previous user? Log in here"),l&&c.a.createElement("div",null,"Error"))}))),c.a.createElement(de.a,{open:k,disableBackdropClick:!0},c.a.createElement(ve.a,null,c.a.createElement(vt.a,{className:t.icon}),"New Account"),c.a.createElement(ge.a,null,c.a.createElement(fe.a,null,"  User  successfully created! ")),c.a.createElement(pe.a,null,c.a.createElement(me.a,{color:"primary",variant:"contained",onClick:function(){return a(!1)}}," Login "))))})),wt=y((function(){var e=Object(r.useState)(!0),t=Object(w.a)(e,2),a=t[0],n=t[1];return a?c.a.createElement(yt,{setNewUser:n}):c.a.createElement(gt,{setNewUser:n})}));function Ot(){var e=Object(n.a)([" \n\tquery{\n\t\tisLoggedIn @client\n\t}\n\n\n"]);return Ot=function(){return e},e}var jt=new u.a({uri:"http://localhost:8000/graphql/",fetchOptions:{credentials:"include"},request:function(e){var t=localStorage.getItem("authToken")||"";e.setContext({headers:{Authorization:"JWT ".concat(t)}})},clientState:{defaults:{isLoggedIn:!!localStorage.getItem("authToken")}}}),xt=Object(u.b)(Ot());i.a.render(c.a.createElement(o.b,{client:jt},c.a.createElement(s.b,{query:xt},(function(e){return e.data.isLoggedIn?c.a.createElement(it,null):c.a.createElement(wt,null)}))),document.getElementById("myapp")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[178,1,2]]]);
//# sourceMappingURL=main.ce666194.chunk.js.map